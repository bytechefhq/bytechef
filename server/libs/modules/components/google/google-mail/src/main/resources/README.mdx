## Connection Setup

### Create OAuth 2.0 Application

Creation of OAuth 2.0 application is documented [here](/reference/components/google-application-setup_v1#create-oauth-20-application).

### Enable Gmail API

1. In the [Google Cloud Console](https://console.cloud.google.com/), select your project.
2. Go to the **APIs & Services**.
3. Click on **ENABLE APIS AND SERVICES**.
4. Search for "gmail api" in the search bar.
5. Click on **Gmail API**.
6. Click **Enable**.

<div style={{ position: 'relative', height:0, width: '100%', overflow: 'hidden', zIndex: 99999, boxSizing: 'border-box', paddingBottom: 'calc(50.05219207% + 32px)'}}>
<iframe src="https://www.guidejar.com/embed/2d7279c7-91c3-43c9-9004-99f08d7e30ff?type=1&controls=on" width="100%" height="100%" style={{height:'100%', position:'absolute', inset:0}} allowFullScreen frameBorder="0"></iframe>
</div>

## Trigger Setup

### New Email Trigger Setup

Setting up Pub/Sub service

1. Deploy project that has **New Mail Trigger**.
2. Click this icon to copy the static webhook URL.
3. In search bar enter "pub/sub".
4. Click on **Pub/Sub**.
5. Click on **Create topic**.
6. Enter your topic name.
7. Click on **Create**.
8. Click on **Subscriptions**.
9. Click on your automatically created subscription.
10. Click on **Edit**.
11. Select **Push**.
12. Click on **Endpoint URL** and paste previously copied URL.
13. Select **Never expire**.
14. Click on **Update**.
15. Click on **Topics**.
16. Click here.
17. Click on **Add principal**.
18. Add **gmail-api-push@system.gserviceaccount.com** as new principal.
19. Click here.
20. Click on **Pub/Sub Publisher**.
21. Click on **Save**.
22. Click on **MyTopic**.
23. This is your **topic name**.

<div style={{ position: 'relative', height:0, width: '100%', overflow: 'hidden', zIndex: 99999, boxSizing: 'border-box', paddingBottom: 'calc(50.05219207% + 32px)'}}>
    <iframe src="https://www.guidejar.com/embed/934ccb3b-1052-440e-bcfa-9cd5d27b8a91?type=1&controls=on" width="100%" height="100%" style={{height:'100%', position:'absolute', inset:0}} allowFullScreen frameBorder="0"></iframe>
</div>

### New Email Pooling Trigger Setup

Turning on Google Calendar API

Gmail doesnâ€™t manage its own time zone; it inherits the time zone from your Google Calendar settings, so we rely on the Calendar API to resolve times correctly.

1. Go to the [Google Cloud Console](https://console.cloud.google.com/).
2. Click on **APIs & Services**.
3. In search bar enter "Google Calendar API".
4. Click on **Google Calendar API**.
5. Click on **Enable**.
6. Done ðŸš€

<div style={{ position: 'relative', height:0, width: '100%', overflow: 'hidden', zIndex: 99999, boxSizing: 'border-box', paddingBottom: 'calc(50.05219207% + 32px)'}}>
    <iframe src="https://www.guidejar.com/embed/157feabc-9dec-4ac4-a538-5aa6a0bb0928?type=1&controls=on" width="100%" height="100%" style={{height:'100%', position:'absolute', inset:0}} allowFullScreen frameBorder="0"></iframe>
</div>

## Troubleshooting

### Access Blocked: Verification Process Not Completed

Documentation for how to add a test user can be found [here](/reference/components/google-application-setup_v1#access-blocked-verification-process-not-completed)

![anl-c-google-mail-md](https://static.scarf.sh/a.png?x-pxid=2bfa99dc-2ceb-4a8f-9b0e-26650c2f0f95)
