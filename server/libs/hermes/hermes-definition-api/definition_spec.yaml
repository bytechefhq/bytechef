info:
  title: Common Definition Specification
  description: Common Definition structs.
  version: v1
schemas:
  OneOfProperty:
    description: A one of property type.
    type: object
    allOf:
      - $ref: '#/schemas/Property'
      - type: object
        properties:
          types:
            description: Possible types of properties that can be used.
            type: array
            items:
              $ref: '../../hermes-definition-api/definition_spec.yaml#/schemas/Property'
  ArrayProperty:
    description: An array property type.
    type: object
    allOf:
      - $ref: '#/schemas/ValueProperty'
      - type: object
        properties:
          items:
            description: Types of the array items.
            type: array
            items:
              $ref: '../../hermes-definition-api/definition_spec.yaml#/schemas/Property'
          multipleValues:
            description: If the array can contain multiple items.
            type: boolean
          options:
            description: The list of valid property options.
            type: array
            items:
              $ref: '#/schemas/Option'
          optionsDataSource:
            ref$: '#/schemas/OptionsDataSource'
  BooleanProperty:
    description: A boolean property type.
    type: object
    allOf:
      - $ref: '#/schemas/ValueProperty'
  ControlType:
    description: A type of the control to show in UI.
    type: string
    enum:
      - CHECKBOX
      - CODE_EDITOR
      - DATE
      - DATE_TIME
      - INPUT_EMAIL
      - INPUT_INTEGER
      - INPUT_NUMBER
      - INPUT_PASSWORD
      - INPUT_PHONE
      - INPUT_TEXT
      - INPUT_URL
      - JSON_BUILDER
      - MULTI_SELECT
      - SELECT
      - TEXT_AREA
  DateProperty:
    description: A date property type.
    type: object
    allOf:
      - $ref: '#/schemas/ValueProperty'
      - type: object
        properties:
          options:
            description: The list of valid property options.
            type: array
            items:
              $ref: '#/schemas/Option'
          optionsDataSource:
            ref$: '#/schemas/OptionsDataSource'
  DateTimeProperty:
    description: A date-time property type.
    type: object
    allOf:
      - $ref: '#/schemas/ValueProperty'
      - type: object
        properties:
          options:
            description: The list of valid property options.
            type: array
            items:
              $ref: '#/schemas/Option'
          optionsDataSource:
            ref$: '#/schemas/OptionsDataSource'
  DynamicPropertiesProperty:
    description: A dynamic properties property type.
    type: object
    allOf:
      - $ref: '#/schemas/Property'
      - type: object
        properties:
          propertiesDataSource:
            ref$: '#/schemas/PropertiesDataSource'
  Display:
    description: A display information.
    type: object
    properties:
      category:
        description: The category.
        type: string
      description:
        description: The description.
        type: string
      icon:
        description: The icon.
        type: string
      label:
        description: The label.
        type: string
      subtitle:
        description: The additional explanation.
        type: string
      tags:
        description: Tags for categorization.
        type: array
        items:
          type: string
  IntegerProperty:
    description: An integer property type.
    type: object
    required:
      - type
    allOf:
      - $ref: '#/schemas/ValueProperty'
      - type: object
        properties:
          maxValue:
            description: The maximum property value.
            type: integer
            format: int32
          minValue:
            description: The minimum property value.
            type: integer
            format: int32
          options:
            description: The list of valid property options.
            type: array
            items:
              $ref: '#/schemas/Option'
          optionsDataSource:
            ref$: '#/schemas/OptionsDataSource'
  NumberProperty:
    description: A number property type.
    type: object
    allOf:
      - $ref: '#/schemas/ValueProperty'
      - type: object
        properties:
          maxValue:
            description: The maximum property value.
            type: integer
            format: int32
          minValue:
            description: The minimum property value.
            type: integer
            format: int32
          numberPrecision:
            description: The number value precision.
            type: integer
            format: int32
          options:
            description: The list of valid property options.
            type: array
            items:
              $ref: '#/schemas/Option'
          optionsDataSource:
            ref$: '#/schemas/OptionsDataSource'
  ObjectProperty:
    description: An object property type.
    type: object
    allOf:
      - $ref: '#/schemas/ValueProperty'
      - type: object
        properties:
          additionalProperties:
            description: Types of dynamically defined properties.
            type: array
            items:
              $ref: '../../hermes-definition-api/definition_spec.yaml#/schemas/Property'
          multipleValues:
            description: If the object can contain multiple additional properties.
            type: boolean
          objectType:
            description: The object type.
            type: string
          options:
            description: The list of valid property options.
            type: array
            items:
              $ref: '#/schemas/Option'
          optionsDataSource:
            ref$: '#/schemas/OptionsDataSource'
          properties:
            description: The list of valid object property types.
            type: array
            items:
              $ref: '../../hermes-definition-api/definition_spec.yaml#/schemas/Property'
  Option:
    description: Defines valid property value.
    type: object
    properties:
      description:
        description: Description of the option.
        type: string
      displayCondition:
        description: Defines rules when a property should be shown or hidden.
        type: string
      name:
        description: The name of an option.
        type: string
      value:
        description: The value of an option.
        type: object
  OptionsDataSource:
    description: Defines function that should dynamically load options for the property.
    type: object
    properties:
      loadOptionsDependsOn:
        description: The list of property names on which value change the property options should load/reload.
        type: array
        items:
          type: string
  #      loadOptionsFunction:
  #        description: The function that should dynamically load options for the property.
  #        type: object
  PropertiesDataSource:
    description: Defines function that should load properties.
    type: object
    properties:
      loadPropertiesDependsOn:
        description: The list of property names on which value change the properties should load/reload.
        type: array
        items:
          type: string
  #      loadPropertiesFunction:
  #        description: The function that should dynamically load properties.
  #        type: object
  Property:
    description: A base property.
    type: object
    required:
    - propertyType
    properties:
      advancedOption:
        description: If the property should be grouped under advanced options.
        type: boolean
      description:
        description: The property description.
        type: string
      displayCondition:
        description: Defines rules when a property should be shown or hidden.
        type: string
      expressionEnabled:
        description: Defines if the property can contain expressions or only constant values.
        type: boolean
      hidden:
        description: If the property should be visible or not.
        type: boolean
      label:
        description: The property label.
        type: string
      metadata:
        description: The additional data that can be used during processing.
        type: object
        additionalProperties:
          type: object
      name:
        description: The property name.
        type: string
      placeholder:
        description: The property placeholder.
        type: string
      required:
        description: If the property is required or not.
        type: boolean
      type:
        $ref: '#/schemas/PropertyType'
    discriminator:
      propertyName: __model_type
      mapping:
        ARRAY: '#/schemas/ArrayProperty'
        BOOLEAN: '#/schemas/BooleanProperty'
        DATE: '#/schemas/DateProperty'
        DATE_TIME: '#/schemas/DateTimeProperty'
        DYNAMIC_PROPERTIES: '#/schemas/DynamicPropertiesProperty'
        INTEGER: '#/schemas/IntegerProperty'
        NUMBER: '#/schemas/NumberProperty'
        STRING: '#/schemas/StringProperty'
        OBJECT: '#/schemas/ObjectProperty'
        ONE_OF: '#/schemas/OneOfProperty'
  PropertyType:
    description: A type of property.
    type:
    enum:
      - ARRAY
      - BOOLEAN
      - DATE
      - DATE_TIME
      - DYNAMIC_PROPERTIES
      - INTEGER
      - "NULL"
      - NUMBER
      - STRING
      - OBJECT
      - ONE_OF
  Resources:
    description: A set of available resources.
    type: object
    properties:
      documentationUrl:
        description: The url of available documentation.
        type: string
  StringProperty:
    description: A string property.
    type: object
    allOf:
      - $ref: '#/schemas/ValueProperty'
      - type: object
        properties:
          options:
            description: The list of valid property options.
            type: array
            items:
              $ref: '#/schemas/Option'
          optionsDataSource:
            ref$: '#/schemas/OptionsDataSource'
  ValueProperty:
    description: A base property for all value based properties.
    type: object
    allOf:
      - $ref: '#/schemas/Property'
      - type: object
        properties:
          controlType:
            $ref: '#/schemas/ControlType'
          defaultValue:
            description: The property default value.
            type: object
          sampleValue:
            description: The property sample value.
            type: object
