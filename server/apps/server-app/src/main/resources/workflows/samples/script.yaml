label: Function Demo

inputs:
  - name: yourName
    label: Your Name
    type: string
    required: true

tasks:
  - name: randomNumber
    label: Generate a random number
    type: randomHelper/v1/randomInt
    startInclusive: 0
    endInclusive: 5000
  - name: script1
    type: script/v1/javascript
    parameters:
      input:
        randomNum : ${randomNumber}
        randomInput: ${yourName}
      script: >
        function perform(input) {
          print('My random number ' + input.randomNum);
          print('My random input ' + input.randomInput);
          print('My random input x ' + input.randomInputX);

          return 2 * input.randomNum;
        }
  - label: Print result from the JavaScript script
    type: logger/v1/info
    parameters:
      text: 'Result from script1: ${script1}'
  - name: script2
    type: script/v1/python
    parameters:
      input:
        randomNum : ${randomNumber}
        randomInput: ${yourName}
      script: >
        def perform(input):
          print('My random number ' + str(input.randomNum))
          print('My random input ' + input.randomInput)
          print('My random input x ' + ('undefined' if hasattr(input, 'randomInputX') == False else input.randomInputX))

          return 2 * input.randomNum
  - label: Print result from the Python script
    type: logger/v1/info
    parameters:
      text: 'Result from script2: ${script2}'
  - name: script3
    type: script/v1/r
    parameters:
      input:
        randomNum: ${randomNumber}
        randomInput: ${yourName}
      script: >
        perform <- function(input) {
          return (2 * input$randomNum)
        }
  - label: Print result from the R script
    type: logger/v1/info
    parameters:
      text: 'Result from script3: ${script3}'
  - name: script4
    type: script/v1/ruby
    parameters:
      input:
        randomNum : ${randomNumber}
        randomInput: ${yourName}
      script: >
        def perform(input)
          return 2 * input.randomNum;
        end
  - label: Print result from the Ruby script
    type: logger/v1/info
    parameters:
      text: 'Result from script4: ${script4}'
