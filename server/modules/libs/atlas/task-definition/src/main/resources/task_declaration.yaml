---
"$schema": https://json-schema.org/draft-07/schema#
"$id": https://github.com/integrihq/integri/blob/master/server/modules/libs/atlas/task-specification/src/main/resources/task_declaration.yaml
title: TaskDeclaration
type: object
description: Task declaration structs.
properties:
  specification:
    "$ref": "#/definitions/TaskSpecification"
definitions:
  DisplayOption:
    type: object
    properties:
      hide:
        type: object
        additionalProperties:
          type: array
          nullable: true
          items:
            oneOf:
              - type: boolean
              - type: integer
              - type: string
      show:
        type: object
        additionalProperties:
          type: array
          nullable: true
          items:
            oneOf:
              - type: boolean
              - type: integer
              - type: string
  TaskSpecification:
    type: object
    required:
      - name
      - displayName
      - icon
    properties:
      credentials:
        description: "The list of supported credentials."
        type: array
      items:
        "$ref": "#/definitions/TaskCredential"
      description:
        description: "The task description"
        type: string
      displayName:
        description: "The name visible in UI editor."
        type: string
      name:
        description: "The task name"
        type: string
      icon:
        description: "The icon that represents the task."
        type: string
      properties:
        description: "The list of available task properties."
        type: array
          items:
            "$ref": "#/definitions/TaskProperty"
      subtitle:
        description: "Additional short description visible in UI editor."
        type: string
      version:
        description: "The task version"
        type: integer
        default: 1
  TaskCredential:
    type: object
    required:
      - name
    properties:
      name:
        description: "The name of credential type."
        type: string
      required:
        description: "Is it required or not when selected."
        type: boolean
      displayOption:
        description: "Is the credential type visible or hidden in UI depending on properties defined by display option."
        "$ref": "#/definitions/DisplayOption"
  TaskParameter:
    type: object
    additionalProperties:
      type: object
      oneOf:
        - type: boolean
        - type: integer
        - type: string
        - "$ref": "#/definitions/TaskParameter"
        - type: array
          items:
            oneOf:
              - type: boolean
              - type: integer
              - type: string
        - type: array
          items:
            "$ref": "#/definitions/TaskParameter"
  TaskProperty:
    type: object
    required:
      - name
      - displayName
      - type
    properties:
      defaultValue:
        nullable: true
        oneOf:
          - type: boolean
          - type: integer
          - type: string
          - "$ref": "#/definitions/TaskParameter"
          - type: array
            items:
              oneOf:
                - type: boolean
                - type: integer
                - type: string
          - type: array
            items:
              "$ref": "#/definitions/TaskParameter"
      description:
        description: "The task property description."
        type: string
      displayName:
        description: "The display name visible in the UI editor."
        type: string
      displayOption:
        description: "The display option that defines if the property is visible or not in the UI editor."
        "$ref": "#/definitions/DisplayOption"
      name:
        description: "The task property name."
        type: string
      required:
        description: "If the property task is required or not."
        type: boolean
      type:
        description: "The task type"
        type: string
        enum:
          - BOOLEAN
          - COLLECTION
          - COLOR
          - DATE_TIME
          - GROUP
          - JSON
          - MULTI_SELECT
          - NUMBER
          - SELECT
          - STRING
      typeOption:
        description: "The optional task options."
        "$ref": "#/definitions/TaskPropertyTypeOption"
    TaskPropertyTypeOption:
      type: object
        properties:
          loadOptionsDependsOn:
            description: "The list of property tasks 'loadOptionsMethod' depends on."
            type: array
            items:
              type: string
          loadOptionsMethod:
            description: "The name of method defined in TaskSpecification implementation that is used for dynamic load of option values."
            type: string
          maxValue:
            description: "Defines max value for the number task property."
            type: number
            format: double
          minValue:
            description: "Defines min value for the number task property."
            type: number
            format: double
          multipleValues:
            description: "Defines if it is allowed to define multiple values for the task property."
            type: boolean
          multipleValueButtonText:
            description: ""
            type: string
          numberPrecision:
            description: "Defines number precision for the task property of type number."
            type: integer
